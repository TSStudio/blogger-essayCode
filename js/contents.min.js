function getRemoteAssets(t,e){xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(response=this.responseText,e()),4==this.readyState&&200!=this.status&&errorHandler("Failed to load remote assets 无法加载以下资源: "+t)},xhttp.open("GET",t,!0),xhttp.send()}function errorHandler(t,e=null,s=null){let n=document.getElementById("error-holder");n&&(n.innerText=n.innerText+"\n"+t,null!=e&&(n.innerText=n.innerText+"\n"+e),null!=s&&(n.innerText=n.innerText+" :"+s),n.innerText=n.innerText+"\n\n")}function loadcontents(t=1){curPage=t,getRemoteAssets(1==t?"https://www.tmysam.top/blogger/apis/getContents.php?from=-1":"https://www.tmysam.top/blogger/apis/getContents.php?from="+(10*(t-1)).toString(),loadcontentsStage2)}function datetimeparser(t){return d=new Date,d.setTime(1e3*t),d.format("yyyy-MM-dd hh:mm:ss")}function swpg(t=0){0==t&&(ipg=document.getElementById("pageno"),t=parseInt(ipg.value),isNaN(t))?ipg.value=curPage:t<1||t>totalpages?ipg.value=curPage:loadcontents(t)}function loadpassage(t){window.location.href="read.html?tid="+t.toString()}function loadcontentsStage2(){for(passagelist=document.getElementById("passagelist"),contents=JSON.parse(response),totalpages=Math.ceil(contents.total/10),str='<div class="pageselector">',curPage>1&&(str=str+'<a onclick="swpg('+(curPage-1).toString()+')" class="back">上一页</a>'),str=str+'第 <input id="pageno" type="text" style="width:20px" onchange="swpg()" value="'+curPage.toString()+'"> 页，共 '+totalpages.toString()+" 页",curPage<totalpages&&(str=str+'<a onclick="swpg('+(curPage+1).toString()+')" class="back">下一页</a>'),str+="</div>",i=0;i<contents.articles.length;i++)str=str+'<div class="passagebutton" onclick="loadpassage('+contents.articles[i].id.toString()+')"><p class="datetime">'+datetimeparser(contents.articles[i].lastedit)+'</p><p class="titlebutton">'+contents.articles[i].title+"</p></div>";str+='<div class="pageselector">',curPage>1&&(str=str+'<a onclick="swpg('+(curPage-1).toString()+')" class="back">上一页</a>'),str=str+'第 <input id="pageno" type="text" style="width:20px" onchange="swpg()" value="'+curPage.toString()+'"> 页，共 '+totalpages.toString()+" 页",curPage<totalpages&&(str=str+'<a onclick="swpg('+(curPage+1).toString()+')" class="back">下一页</a>'),str+="</div>",passagelist.innerHTML=str}var response,totalpages,curPage=1,blocked=0,curId=0;window.addEventListener("error",t=>{errorHandler(t.error,t.filename,t.lineno)}),Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t},window.onload=function(){loadcontents()};